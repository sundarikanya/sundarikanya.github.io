<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MODEL HUB</title>
<link rel="icon" type="image/x-icon" href="apple-touch-icon.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">

    <link rel="stylesheet" href="cssnain.css">

    <style>
        #suggestedVideos .card:hover{transform:scale(1.02);box-shadow:0 4px 16px rgba(0,0,0,.1)}#suggestedVideos .card-img-top{height:200px;object-fit:cover}#suggestedVideos .card-title{font-size:1rem;line-height:1.2;font-weight:600;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.btn:disabled{pointer-events:none;opacity:.6}.badge{margin-right:5px}
        .logo {
      cursor: pointer;
        }

    </style>

    
</head>

<body>



    <header class="bg-white shadow-sm p-3 mb-3">
        <div class="container-fluid d-flex justify-content-between align-items-center flex-wrap">
            <div class="logo" id="logoClick">
                MODEL
                <img src="swimsuit_4813557.png" alt="Logo Icon"> HUB

            </div>
            <div class="search-box">
                <button class="btn-search" id="searchBtn"><i class="fas fa-search"></i></button>
                <input type="text" class="input-search" id="searchInput" placeholder="Type to Search...">
            </div>

            <ul id="categoryList" class="keywords list-inline mb-0"></ul>
        </div>
    </header>

    <div class="container-fluid">
        <div class="row">

            <!-- Left Sidebar -->
            <div class="col-md-2 sidebar bg-light">
                <p>Left Sidebar</p>
                <meta name="7searchppc" content="380f1d861996b205414e9bab9fa56fd0"/>
            </div>

            <!-- Center Cards -->
            <div class="col-md-8">
                <div class="row g-3" id="video-container">
                    <!-- Cards will be injected here -->
                </div>

                <!-- Pagination Controls -->
                <div class="d-flex justify-content-center my-4">
                    <button id="prevBtn" class="btn btn-outline-primary mx-2" disabled>Previous</button>
                    <button id="nextBtn" class="btn btn-primary mx-2">Next Page</button>
                </div>
            </div>

            <!-- Right Sidebar -->
            <div class="col-md-2 sidebar bg-light">
                <p>Right Sidebar</p>
                <meta name="7searchppc" content="380f1d861996b205414e9bab9fa56fd0"/>
            </div>

        </div>
    </div>



    <script>
        async function loadTopCategories() {
            const categoryList = document.getElementById("categoryList");
        
            try {
                const response = await fetch("https://sundarikanya.vercel.app/api/get/bestcategory");
                const result = await response.json();
        
                categoryList.innerHTML = "";
        
                if (result.status === "success" && result.best_categories.length > 0) {
                    const topCategories = result.best_categories.slice(0, 6); // You can change limit here
        
                    topCategories.forEach((cat, index) => {
                        const li = document.createElement("li");
                        li.className = "list-inline-item";
        
                        const button = document.createElement("button");
                        button.className = "text-secondary category-btn";
                        button.setAttribute("data-category", cat.category);
                        button.innerText = cat.category;
        
                        li.appendChild(button);
                        categoryList.appendChild(li);
        
                        if (index !== topCategories.length - 1) {
                            const separator = document.createElement("li");
                            separator.className = "list-inline-item text-secondary";
                            separator.innerText = "|";
                            categoryList.appendChild(separator);
                        }
                    });
        
                    // Attach click listeners after DOM is updated
                    document.querySelectorAll('.category-btn').forEach(button => {
                        button.addEventListener('click', () => {
                            currentCategory = button.getAttribute('data-category');
                            currentQuery = '';
                            currentPage = 1;
                            loadVideos(currentPage);
                        });
                    });
        
                } else {
                    categoryList.innerHTML = "<li class='list-inline-item'>No categories found</li>";
                }
            } catch (error) {
                categoryList.innerHTML = "<li class='list-inline-item text-danger'>Failed to load categories</li>";
            }
        }
        
        loadTopCategories();
    </script>

    <script>
        let currentPage = 1;
        let currentQuery = '';       // for search
        let currentCategory = '';    // for category
        
        function loadVideos(page) {
          const container = document.getElementById('video-container');
          container.innerHTML = ''; // Clear previous
        
          let baseUrl = '';
        
          if (currentQuery) {
            baseUrl = `https://sundarikanya.vercel.app/api/get/search?query=${encodeURIComponent(currentQuery)}&page=${page}`;
          } else if (currentCategory) {
            baseUrl = `https://sundarikanya.vercel.app/api/get/sundarikanya1?category=${encodeURIComponent(currentCategory)}&page=${page}`;
          } else {
            baseUrl = `https://sundarikanya.vercel.app/api/get/sundarikanya?page=${page}`;
          }
        
          fetch(baseUrl)
            .then(res => res.json())
            .then(response => {
              const data = response.data;
        
              if (!data || data.length === 0) {
                container.innerHTML = "<h4 class='text-center my-5'>No videos found.</h4>";
                return;
              }
        
              data.forEach(video => {
                const card = `
                  <div class="col-6 col-md-4 col-lg-2-4">
                    <a href="video.html?id=${video.id}" class="text-decoration-none text-dark">
                      <div class="outer-card">
                        <div class="inner-box">
                          <div class="thumbnail-wrapper">
                            <img class="thumb" src="${video.thumbnail}" alt="Thumbnail">
                          </div>
                          <div class="video-title">${video.title}</div>
                        </div>
                      </div>
                    </a>
                  </div>`;
                container.insertAdjacentHTML('beforeend', card);
              });
        
              document.getElementById('prevBtn').disabled = page <= 1;
            })
            .catch(error => {
              console.error("Error loading videos:", error);
              container.innerHTML = "<h4 class='text-center my-5 text-danger'>Failed to load videos.</h4>";
            });
        }
        
        // Initial load
        loadVideos(currentPage);
        
        // Pagination controls
        document.getElementById('prevBtn').addEventListener('click', () => {
          if (currentPage > 1) {
            currentPage--;
            loadVideos(currentPage);
          }
        });
        
        document.getElementById('nextBtn').addEventListener('click', () => {
          currentPage++;
          loadVideos(currentPage);
        });
        
        // Search input
        document.getElementById('searchBtn').addEventListener('click', () => {
          const query = document.getElementById('searchInput').value.trim();
          currentQuery = query;
          currentCategory = '';  // Clear category
          currentPage = 1;
          loadVideos(currentPage);
        });
        
        document.getElementById('searchInput').addEventListener('keyup', (e) => {
          if (e.key === 'Enter') {
            document.getElementById('searchBtn').click();
          }
        });
        
        // Category filter
        document.querySelectorAll('.category-btn').forEach(button => {
          button.addEventListener('click', () => {
            currentCategory = button.getAttribute('data-category');
            currentQuery = '';  // Clear search
            currentPage = 1;
            loadVideos(currentPage);
          });
        });
    </script>

    <script>
      document.getElementById('logoClick').addEventListener('click', () => {
        window.location.href = 'index.html';
      });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>